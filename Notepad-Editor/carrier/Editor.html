<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
  <title>Notepad-Editor</title>
  <style>
    html {
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      padding: 0;
    }

    .wrapper {
      margin: 0;
      padding: 0;
    }
  </style>
  <script src="../dist/index.min.js"></script>
  <link href="../dist/index.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="wrapper">
  <div id="neditor"></div>
</div>
</body>
<script>
  let editor = new Neditor("neditor", {
    height: "auto",
    theme: "classic",
    cache: {
      enable: false
    },
  });

  let oldHeight = 0;
  let observeHeight = function () {
    let newHeight = document.body.scrollHeight;
    if (newHeight !== oldHeight) {
      oldHeight = newHeight;
      console.log(newHeight);
      window.webkit.messageHandlers.adjustHeight.postMessage(newHeight);
    }
  }

  addEventListener("scroll", observeHeight);
  addEventListener("resize", observeHeight);
  addEventListener("click", observeHeight);
  addEventListener("keyup", observeHeight);

  let observeTextChange = function () {
    window.webkit.messageHandlers.textChange.postMessage('L');
  }

  // addEventListener("scroll", observeTextChange);
  // addEventListener("resize", observeTextChange);
  // addEventListener("click", observeTextChange);
  addEventListener("keyup", observeTextChange);

</script>
</html>
